@page "/registration"
@attribute [StreamRendering]
@rendermode InteractiveServer

<div class="container-add-order">
    <div class="fields-add-order">
        <form>
            <h2 class="manager-h1">Регистрация:</h2>

            <div class="conteiner-for-text">
                <label class="text">Имя:</label>
                <input @bind=_user.UserName class="field" type="name" placeholder="Введите имя">
            </div>
            <div class="conteiner-for-text">
                <label class="text">Почта:</label>
                <input @bind=_user.Mail class ="field" type="text" placeholder="Введите почту">
            </div>
            <div class="conteiner-for-text">
                <label class="text">Телефон:</label>
                <input @bind=_user.Phone class ="field" type="text" placeholder="Введите телефон">
            </div>
            <div class="conteiner-for-text">
                <label class="text">Пароль:</label>
                <input @bind=_user.Password class ="field" type="text" placeholder="Введите пароль">
            </div>
        </form>

        <div>
            <button @onclick=AddUser class="purple-button">Регистрация</button>
            <button class="purple-button">Отмена</button>
        </div>
    </div>
</div>


<section>
    <div class="manager-blok">
        <h2 class="manager-h1"> Пользователи:</h2>
        <div class="manager-button-contaiber">
            @foreach (var i in _users)
            {
                <button class="client-button"> <UserCard user=i> </UserCard> </button>
            }
        </div>
    </div>
</section>
@code
{
    private UserRegistrationInputModel _user;

    private IEnumerable<UserOutputModel> _users;

    private IUserService _userService;

    public UserTests()
    {
        _userService = new UserService();
    }

    protected override void OnInitialized()
    {
        _users = _userService.GetAllUsers();

        _user = new UserRegistrationInputModel();
    }

    public void AddUser()
    {
        _users.ToList().Add(_userService.AddUser(_user));
    }
}