@page "/taskMaster/task/{Id:int}"
@using YourDay.DAL.Enums;

@code {
    [Parameter]
    public int Id{ get; set;}
    
    private TaskClient taskClinet = new TaskClient();
    private List<TaskOutputModel> _tasks;


    public TaskPage()
    {
        _tasks = taskClinet.GetTaskById(Id);
    }

    protected override void OnInitialized()
    {
        List<TaskOutputModel> _task = taskClinet.GetTaskById(Id);
        taskClinet.UpdateStatusTaskByTaskId(Id, Status.Cancelled);
    }

    public void UpdateStatusTask(ChangeEventArgs e)
    {

        int newStatusInt = int.Parse(e.Value.ToString());

        Status newStatus = Status.Received;

        switch (newStatusInt)
        {
            case 0:
                newStatus = Status.Received;

                break;
            case 1:
                newStatus = Status.InProgress;

                break;
            case 2:
                newStatus = Status.Completed;

                break;
            case 3:
                newStatus = Status.Cancelled;

                break;
        }

    }
 }
 <div class="task-container">
     @foreach(TaskOutputModel model in _tasks)
    {
        <div class="taskMaster-card">
            <p class="task-id">Id:@Id</p>
            <p class="task-title"> Название: @model.Description</p>
            <p class="task-date">Дата: @model.TimeStart - @model.TimeEnd</p>
            <select @onchange="@UpdateStatusTask">
                <option value="0">Получен</option>
                <option value="1">В работе</option>
                <option value="2">Завершен</option>
                <option value="3">Отменен</option>
            </select>
        </div>
    }
 </div>

  
